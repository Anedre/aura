@import "tailwindcss";

/* ======== Night Theme (default) ======== */
:root {
  --background: #050713;
  --foreground: #F5F8FF;

  --primary:   #7766FF;
  --accent:    #36E0B8;

  --muted:   #0A1024;
  --card:    #101634;
  --border:  #1E2A4A;

  /* Chart defaults (night) */
  --chart-label: rgba(245, 248, 255, 0.78);
  --chart-axis: rgba(175, 189, 232, 0.32);
  --chart-grid: rgba(85, 112, 180, 0.16);
  --chart-tooltip-bg: rgba(12, 16, 33, 0.96);
  --chart-tooltip-fg: rgba(245, 248, 255, 0.96);

  --ring:    #7766FF80;
  --success: #22C55E;
  --warning: #FACC15;
  --danger:  #F87171;

  --aura-transition: 260ms;
}

/* ======== Day Theme ======== */
:root[data-theme="day"] {
  --background: #F3F6FE;
  --foreground: #0E1B3D;

  --primary:   #4D5DFF;
  --accent:    #1BCFA1;

  --muted:   #FFFFFF;
  --card:    #FFFFFF;
  --border:  #D8E1FF;
  --ring:    #4D5DFF44;

  --success: #16A34A;
  --warning: #E19C35;
  --danger:  #DC4D4D;

  /* Chart overrides (day) */
  --chart-label: rgba(14, 27, 61, 0.72);
  --chart-axis: rgba(14, 27, 61, 0.28);
  --chart-grid: rgba(14, 27, 61, 0.12);
  --chart-tooltip-bg: rgba(255, 255, 255, 0.98);
  --chart-tooltip-fg: rgba(14, 27, 61, 0.95);
}

/* Tailwind v4 tokens */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-primary:    var(--primary);
  --color-accent:     var(--accent);
  --color-muted:      var(--muted);
  --color-card:       var(--card);
  --color-border:     var(--border);
  --color-ring:       var(--ring);

  --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas;
}

/* Respect OS preference when unset */
@media (prefers-color-scheme: light) {
  :root:not([data-theme]) {
    --background: #F3F6FE;
    --foreground: #0E1B3D;
    --primary:   #4D5DFF;
    --accent:    #1BCFA1;
    --muted:   #FFFFFF;
    --card:    #FFFFFF;
    --border:  #D8E1FF;
    --ring:    #4D5DFF44;
    --success: #16A34A;
    --warning: #E19C35;
    --danger:  #DC4D4D;
  }
}

/* Background with AURA radials */
body {
  background:
    radial-gradient(720px 420px at 20% -15%, color-mix(in oklab, var(--primary) 24%, transparent), transparent 65%),
    radial-gradient(640px 360px at 88% 0%, color-mix(in oklab, var(--accent) 20%, transparent), transparent 72%),
    linear-gradient(160deg, color-mix(in oklab, var(--background) 90%, #0f1733 10%), var(--background));
  color: var(--foreground);
  font-family: var(--font-sans);
  transition: background-color var(--aura-transition) ease, color var(--aura-transition) ease, background var(--aura-transition) ease;
}

:root[data-theme="day"] body {
  background:
    radial-gradient(640px 320px at 20% -18%, color-mix(in oklab, var(--primary) 18%, transparent), transparent 64%),
    radial-gradient(680px 420px at 92% -12%, color-mix(in oklab, var(--accent) 22%, transparent), transparent 70%),
    linear-gradient(160deg, color-mix(in oklab, var(--background) 92%, #ffffff 8%), var(--background));
}

/* ===== UI Primitives ===== */
.card {
  @apply rounded-2xl border shadow;
  backdrop-filter: blur(10px);
  background: color-mix(in oklab, var(--card) 94%, transparent);
  border-color: color-mix(in oklab, var(--border) 85%, transparent);
  box-shadow: 0 24px 48px color-mix(in oklab, #000 12%, transparent);
  transition: background-color var(--aura-transition) ease, border-color var(--aura-transition) ease, color var(--aura-transition) ease, box-shadow var(--aura-transition) ease;
}
:root[data-theme="day"] .card {
  background: color-mix(in oklab, var(--card) 98%, transparent);
  border-color: color-mix(in oklab, var(--border) 80%, transparent);
  box-shadow: 0 18px 36px color-mix(in oklab, #41557d 12%, transparent);
}

.surface {
  border-radius: 20px;
  background: color-mix(in oklab, var(--card) 96%, transparent);
  border: 1px solid color-mix(in oklab, var(--border) 82%, transparent);
  box-shadow: 0 18px 34px color-mix(in oklab, #000 10%, transparent);
  color: var(--foreground);
  transition: background var(--aura-transition) ease, border-color var(--aura-transition) ease, box-shadow var(--aura-transition) ease, color var(--aura-transition) ease;
}
:root[data-theme="day"] .surface {
  background: color-mix(in oklab, var(--card) 99%, transparent);
  border-color: color-mix(in oklab, var(--border) 78%, transparent);
  box-shadow: 0 16px 30px color-mix(in oklab, #647099 14%, transparent);
}

.surface-muted {
  border-radius: 18px;
  background: color-mix(in oklab, var(--card) 90%, transparent);
  border: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
}
:root[data-theme="day"] .surface-muted {
  background: color-mix(in oklab, var(--card) 96%, transparent);
  border: 1px solid color-mix(in oklab, var(--border) 68%, transparent);
}

.text-strong { color: color-mix(in oklab, var(--foreground) 96%, transparent); }
.text-subtle { color: color-mix(in oklab, var(--foreground) 72%, transparent); }
.text-faint   { color: color-mix(in oklab, var(--foreground) 55%, transparent); }
.text-accent  { color: var(--accent); }
.border-soft  { border-color: color-mix(in oklab, var(--border) 65%, transparent) !important; }
.border-strong { border-color: color-mix(in oklab, var(--border) 85%, transparent) !important; }

.input {
  @apply w-full rounded-xl px-3 py-2 outline-none transition;
  background: color-mix(in oklab, var(--card) 88%, transparent);
  border: 1px solid color-mix(in oklab, var(--border) 75%, transparent);
  color: var(--foreground);
}
.input:focus { outline: 2px solid var(--ring); outline-offset: 2px; background: color-mix(in oklab, var(--card) 94%, transparent); }
.input::placeholder { color: color-mix(in oklab, var(--foreground) 60%, transparent); opacity: .7; }

.btn {
  @apply inline-flex items-center justify-center rounded-xl px-3 py-2 transition select-none;
  border: 1px solid color-mix(in oklab, var(--border) 65%, transparent);
  background: color-mix(in oklab, var(--card) 90%, transparent);
}
.btn:hover { background: color-mix(in oklab, var(--card) 94%, transparent); }

.btn-primary { @apply text-white border-none; background: var(--primary); }
:root[data-theme="day"] .btn-primary { @apply text-white; background: var(--primary); }
.btn-primary:hover { filter: brightness(1.08); }

.btn-danger { @apply text-white border-none; background: var(--danger); }
.btn-danger:hover { filter: brightness(1.05); }

.btn-ghost { background: color-mix(in oklab, var(--card) 86%, transparent); }
.btn-ghost:hover { background: color-mix(in oklab, var(--card) 92%, transparent); }
:root[data-theme="day"] .btn-ghost { background: color-mix(in oklab, #000 4%, transparent); }
:root[data-theme="day"] .btn-ghost:hover { background: color-mix(in oklab, #000 8%, transparent); }

.cta-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
  border-radius: 9999px;
  padding: 0.55rem 1.25rem;
  font-size: 0.85rem;
  font-weight: 600;
  border: 1px solid color-mix(in oklab, var(--accent) 45%, transparent);
  color: color-mix(in oklab, var(--accent) 75%, white);
  background: color-mix(in oklab, var(--accent) 20%, transparent);
  transition: background var(--aura-transition) ease, color var(--aura-transition) ease, border-color var(--aura-transition) ease, box-shadow var(--aura-transition) ease;
}
.cta-pill:hover {
  background: color-mix(in oklab, var(--accent) 28%, transparent);
  box-shadow: 0 10px 24px color-mix(in oklab, var(--accent) 30%, transparent);
}
:root[data-theme="day"] .cta-pill {
  color: color-mix(in oklab, var(--accent) 65%, black);
  background: color-mix(in oklab, var(--accent) 12%, white);
  border-color: color-mix(in oklab, var(--accent) 35%, white);
}
:root[data-theme="day"] .cta-pill:hover {
  background: color-mix(in oklab, var(--accent) 18%, white);
}

.link { @apply underline underline-offset-4 decoration-1; }
.link:hover { text-decoration-thickness: 2px; }

/* Orbs */
.aura-orb { position: absolute; inset: auto; width: 28rem; height: 28rem; border-radius: 9999px; filter: blur(64px); background: radial-gradient(closest-side, color-mix(in oklab, var(--primary) 35%, transparent), transparent); opacity: .35; pointer-events: none; transition: background var(--aura-transition) ease, opacity var(--aura-transition) ease; }
.aura-orb--accent { background: radial-gradient(closest-side, color-mix(in oklab, var(--accent) 35%, transparent), transparent); }

/* Chips & Toolbar */
.chip { display: inline-flex; align-items: center; gap: .4rem; font-size: .75rem; line-height: 1; padding: .35rem .6rem; border-radius: 9999px; background: color-mix(in oklab, var(--card) 88%, transparent); border: 1px solid color-mix(in oklab, var(--border) 65%, transparent); }
.chip--green { background: color-mix(in oklab, var(--success) 18%, transparent); color: #e8ffef; border-color: color-mix(in oklab, var(--success) 35%, transparent); }
.chip--red   { background: color-mix(in oklab, var(--danger) 18%, transparent);  color: #ffecec; border-color: color-mix(in oklab, var(--danger) 35%, transparent); }
:root[data-theme="day"] .chip { background: color-mix(in oklab, #000 4%, transparent); border-color: color-mix(in oklab, #000 10%, transparent); }
:root[data-theme="day"] .chip--green { color: #065F46; background: color-mix(in oklab, var(--success) 10%, transparent); border-color: color-mix(in oklab, var(--success) 35%, transparent); }
:root[data-theme="day"] .chip--red   { color: #7F1D1D; background: color-mix(in oklab, var(--danger) 10%, transparent);  border-color: color-mix(in oklab, var(--danger) 35%, transparent); }

.toolbar { display: inline-flex; align-items: center; gap: .5rem; padding: .4rem .6rem; border-radius: .8rem; background: color-mix(in oklab, white 6%, transparent); border: 1px solid color-mix(in oklab, var(--border) 60%, transparent); }
:root[data-theme="day"] .toolbar { background: color-mix(in oklab, black 5%, transparent); border-color: color-mix(in oklab, black 12%, transparent); }

/* Slider accent */
input[type="range"] { accent-color: var(--accent); }

/* Price flash */
.price-flash-up { animation: auraFlashUp 550ms ease; }
.price-flash-down { animation: auraFlashDown 550ms ease; }
@keyframes auraFlashUp { 0% { background: color-mix(in oklab, var(--success) 22%, transparent); } 100% { background: transparent; } }
@keyframes auraFlashDown { 0% { background: color-mix(in oklab, var(--danger) 22%, transparent); } 100% { background: transparent; } }

/* Price change badge */
.price-badge-neutral { background: color-mix(in oklab, var(--foreground) 8%, transparent); border-color: color-mix(in oklab, var(--border) 65%, transparent); color: color-mix(in oklab, var(--foreground) 80%, transparent); }
.price-badge-up { background: color-mix(in oklab, var(--success) 14%, transparent); border-color: color-mix(in oklab, var(--success) 40%, var(--border)); color: color-mix(in oklab, white 90%, var(--success)); }
.price-badge-down { background: color-mix(in oklab, var(--danger) 14%, transparent); border-color: color-mix(in oklab, var(--danger) 40%, var(--border)); color: color-mix(in oklab, white 92%, var(--danger)); }
.price-badge-blink-up { animation: badgePulseUp 780ms ease; }
.price-badge-blink-down { animation: badgePulseDown 780ms ease; }
@keyframes badgePulseUp {
  0% { box-shadow: 0 0 0 0 color-mix(in oklab, var(--success) 40%, transparent); }
  100% { box-shadow: 0 0 0 10px transparent; }
}
@keyframes badgePulseDown {
  0% { box-shadow: 0 0 0 0 color-mix(in oklab, var(--danger) 40%, transparent); }
  100% { box-shadow: 0 0 0 10px transparent; }
}

/* Tooltips */
.tooltip { position: relative; display: inline-block; }
.tooltip .tooltip-panel { position: absolute; z-index: 40; top: calc(100% + 8px); left: 50%; transform: translateX(-50%) translateY(-2px); padding: .6rem .7rem; min-width: 220px; border-radius: .8rem; background: color-mix(in oklab, var(--card) 96%, transparent); border: 1px solid color-mix(in oklab, var(--border) 75%, transparent); box-shadow: 0 10px 30px color-mix(in oklab, black 70%, transparent); opacity: 0; pointer-events: none; transition: opacity var(--aura-transition) ease, transform var(--aura-transition) ease; }
.tooltip:hover .tooltip-panel, .tooltip:focus-within .tooltip-panel { opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0); }
.tooltip .tooltip-panel::after { content: ""; position: absolute; top: -6px; left: 50%; transform: translateX(-50%); border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid color-mix(in oklab, var(--card) 96%, transparent); }
.tooltip-title { font-weight: 600; margin-bottom: .25rem; font-size: .8rem; }
.tooltip-text { font-size: .75rem; opacity: .85; }
.tooltip-panel--danger { border-color: color-mix(in oklab, var(--danger) 65%, var(--border)); }

/* Day overrides for Tailwind utility backgrounds used in toolbars */
:root[data-theme="day"] .bg-white\/5  { background-color: color-mix(in oklab, black 5%, transparent) !important; }
:root[data-theme="day"] .bg-white\/10 { background-color: color-mix(in oklab, black 10%, transparent) !important; }
:root[data-theme="day"] .bg-white\/15 { background-color: color-mix(in oklab, black 15%, transparent) !important; }
:root[data-theme="day"] .bg-white\/20 { background-color: color-mix(in oklab, black 20%, transparent) !important; }
:root[data-theme="day"] .text-white\/90 { color: color-mix(in oklab, #000 88%, transparent) !important; }
:root[data-theme="day"] .text-white\/80 { color: color-mix(in oklab, #000 78%, transparent) !important; }
:root[data-theme="day"] .text-white\/70 { color: color-mix(in oklab, #000 68%, transparent) !important; }
:root[data-theme="day"] .text-white\/60 { color: color-mix(in oklab, #000 58%, transparent) !important; }
:root[data-theme="day"] .text-white\/50 { color: color-mix(in oklab, #000 48%, transparent) !important; }
:root[data-theme="day"] .bg-black\/25 { background-color: color-mix(in oklab, #000 10%, transparent) !important; }
:root[data-theme="day"] .bg-black\/30 { background-color: color-mix(in oklab, #000 12%, transparent) !important; }
:root[data-theme="day"] .bg-black\/60 { background-color: color-mix(in oklab, #000 18%, transparent) !important; }
:root[data-theme="day"] .border-white\/10 { border-color: color-mix(in oklab, #000 12%, transparent) !important; }
:root[data-theme="day"] .border-white\/15 { border-color: color-mix(in oklab, #000 16%, transparent) !important; }
:root[data-theme="day"] .border-white\/20 { border-color: color-mix(in oklab, #000 20%, transparent) !important; }
:root[data-theme="day"] .border-white\/40 { border-color: color-mix(in oklab, #000 26%, transparent) !important; }

/* Smooth progress width transitions */
.progress-smooth { transition: width var(--aura-transition) ease; }

/* Simple entry animation */
@keyframes auraFadeInUp { from { opacity: 0; transform: translateY(6px) } to { opacity: 1; transform: translateY(0) } }
.fade-in-up { animation: auraFadeInUp 320ms ease both; }

@keyframes auraDrawerIn { from { transform: translateX(-12%) scale(0.96); opacity: 0; } to { transform: translateX(0) scale(1); opacity: 1; } }
@keyframes auraBackdropIn { from { opacity: 0; } to { opacity: 1; } }
.nav-drawer { animation: auraDrawerIn var(--aura-transition) ease forwards; will-change: transform, opacity; }
.nav-backdrop { animation: auraBackdropIn calc(var(--aura-transition) * 0.9) ease forwards; }

/* Symbol avatars */
.symbol-avatar { transition: transform 160ms ease, filter 160ms ease; }
.symbol-avatar:hover { transform: scale(1.06); filter: drop-shadow(0 4px 10px rgba(0,0,0,0.25)); }

/* Info badge (inline tooltip trigger) */
.info-badge { display:inline-flex; align-items:center; justify-content:center; width: 18px; height: 18px; border-radius: 9999px; background: color-mix(in oklab, var(--foreground) 10%, transparent); border: 1px solid color-mix(in oklab, var(--border) 60%, transparent); font-size: 12px; line-height: 1; cursor: help; }

/* === AURA: Glossary term highlight + tooltip === */
.tech-term {
  position: relative;
  color: #7dd3fc; /* sky-300 */
  background: linear-gradient(90deg, rgba(34,197,94,0.12), rgba(59,130,246,0.12));
  padding: 0 2px;
  border-radius: 4px;
  border-bottom: 1px dotted rgba(125,211,252,0.7);
  cursor: help;
}
.tech-term__tooltip {
  position: absolute;
  left: 0;
  top: calc(100% + 6px);
  min-width: 240px;
  max-width: 320px;
  z-index: 60;
  background: rgba(14,18,22,0.96);
  color: #e6f1ff;
  border: 1px solid rgba(125,211,252,0.25);
  border-radius: 10px;
  padding: 10px 12px;
  box-shadow: 0 10px 30px rgba(8,30,70,0.38);
  pointer-events: none;
  opacity: 0;
  transform: translateY(-4px);
  transition: opacity .16s ease, transform .16s ease;
  backdrop-filter: saturate(1.2) blur(6px);
}
.tech-term:hover .tech-term__tooltip { opacity: 1; transform: translateY(0); }
.tech-term__title { font-weight: 700; margin-bottom: 4px; color: #9bdcff; }
.tech-term__body { font-size: 12px; opacity: 0.9; }
.tech-term__applies { margin-top: 6px; font-size: 12px; color: #b4f5d0; }
.tech-term__relates { margin-top: 4px; font-size: 12px; color: #9bdcff; opacity: 0.9; }

/* === Onboarding overlay === */
.aura-onboard__backdrop { position: fixed; inset: 0; background: rgba(0,8,16,0.68); backdrop-filter: blur(4px); z-index: 70; }
.aura-onboard__panel { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; z-index: 80; }
.aura-onboard__card {
  width: min(860px, 92vw); max-height: 86vh; overflow: auto;
  background: radial-gradient(1200px 600px at 80% 0%, rgba(32,160,255,0.12), transparent),
              radial-gradient(800px 600px at 0% 100%, rgba(16,185,129,0.12), transparent),
              rgba(10,14,18,0.92);
  border: 1px solid rgba(99,179,237,0.25);
  border-radius: 16px; padding: 18px 18px 14px 18px;
  box-shadow: 0 20px 60px rgba(6, 12, 24, 0.55);
}
.aura-onboard__title { font-size: 20px; font-weight: 800; letter-spacing: .2px; color: #c0f2ff; }
.aura-onboard__subtitle { font-size: 14px; color: rgba(220,240,255,0.80); }
.aura-onboard__footer { display:flex; align-items:center; justify-content:space-between; padding-top: 10px; }
.aura-onboard__dots { display:flex; gap:6px; }
.aura-onboard__dot { width:8px; height:8px; border-radius:9999px; background:#2b3545; }
.aura-onboard__dot.is-active { background: linear-gradient(90deg, #22c55e, #38bdf8); }

